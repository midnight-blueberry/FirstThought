#!/usr/bin/env node
const { spawn } = require('child_process');

const args = process.argv.slice(2);
const env = { ...process.env };
let i = 0;
for (; i < args.length; i++) {
  if (!args[i].includes('=')) break;
  const [key, ...valParts] = args[i].split('=');
  env[key] = valParts.join('=');
}
const cmd = args[i];
const cmdArgs = args.slice(i + 1);

const child = spawn(cmd, cmdArgs, { stdio: 'inherit', env, shell: true });
child.on('exit', code => process.exit(code));
